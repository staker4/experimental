<div class="container-fluid text-center">
    <h2>{{vm.title}}</h2>
    <form>
        <div class="form-group">
            <div class="input-group col-md-12">
                <input type="text" class="form-control" placeholder="Search records..." ng-model="vm.recordSearch" ng-keyup="vm.search($event)">
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-search"></span></button>
                </span>
            </div>
        </div>
    </form>
</div>
<div class="container-fluid">
    <table class="table table-hover table-bordered">
        <thead>
            <th>
                <a ui-sref="records" ng-click="vm.sortType = 'id'; vm.sortReverse = !vm.sortReverse">
                    Id
                    <span ng-show="vm.sortType == 'id' && !vm.sortReverse" class="caret"></span>
                    <span class="dropup"><span ng-show="vm.sortType == 'id' && vm.sortReverse" class="caret"></span></span>
                </a>
            </th>
            <th>
                <a ui-sref="records" ng-click="vm.sortType = 'owner'; vm.sortReverse = !vm.sortReverse">
                    Owner
                    <span ng-show="vm.sortType == 'owner' && !vm.sortReverse" class="caret"></span>
                    <span class="dropup"><span ng-show="vm.sortType == 'owner' && vm.sortReverse" class="caret"></span></span>
                </a>
            </th>
            <th>
                <a ui-sref="records" ng-click="vm.sortType = 'status'; vm.sortReverse = !vm.sortReverse">
                    Status
                    <span ng-show="vm.sortType == 'status' && !vm.sortReverse" class="caret"></span>
                    <span class="dropup"><span ng-show="vm.sortType == 'status' && vm.sortReverse" class="caret"></span></span>
                </a>
            </th>
            <th>Sub Records</th>
        </thead>
        <tbody>
            <tr ng-repeat="record in vm.filteredRecords | orderBy : vm.sortType : vm.sortReverse">
                <td>{{record.id}}</td>
                <td>{{record.owner}}</td>
                <td>{{record.status}}</td>
                <td>
                    <div ng-repeat="sub in record.subrecords | orderBy :'+status'">
                        <div class="col-sm-2">{{sub.id}}</div>
                        <div class="col-sm-5">{{sub.owner}}</div>
                        <div class="col-sm-5">{{sub.status}}</div>
                    </div>
                </td>
        </tbody>
    </table>
</div>